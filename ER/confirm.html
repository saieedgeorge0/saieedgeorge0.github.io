<! DOCTYPE html>
<html>
    <head>
        <meta charset = "UTF-8">
        <link rel = "stylesheet" type = "text/css" href = "css/style.css">
        <title>Speed ER Confirm</title>
    </head>
    <body id = "home">
        <div id = "welcome">Confirm Hospital</div>
        <img id="settings" src = "img/settings.svg">
        <div id = "drop-down">
            <p class="drop-options"><a class="nounderline" href="home.html">Home</a></p>
            <p class="drop-options"><a class="nounderline" href="profile.html">Profile</a></p>
            <p class="drop-options"><a class="nounderline" href="login.html">Logout</a></p>
        </div>
        <br>
        <div id = "da-cards">
            <div>
                <div id="nearest-hospital" class = "home-card confirm-card">
                    <p onclick="geoFindNearestHospitals()" id="near-text-new" class="home-text">Nearest Hospital</p>
                    <p id="hospital-name-new" class="home-text new-texts2">UPMC Children's Hospital</p>
                    <p id="hospital-address-new" class="home-text new-texts3"><a href="https://www.google.com/maps/dir//Children's+Hospital+of+Pittsburgh+of+UPMC,+4401+Penn+Ave,+Pittsburgh,+PA+15224/" target="_blank">4401 Penn Ave, Pittsburgh, PA 15224</a></p>
                    <p id="hospital-number-new" class="home-text new-texts4"><a href="tel:4126925325">412-692-5325</a></p>
                    <p class="home-text hospital-wait-text">total min.</p>
                    <p id = "label-wait1" class="home-text">miles</p>
                    <p id= "label-wait2" class="home-text">min. distance</p>
                    <p id="label-wait3" class="home-text">min. wait</p>
                    <p id="dist-miles" class="home-text new-wait">5.5</p>
                    <p id="dist-time" class="home-text new-wait">10</p>
                    <p id="hosp-time" class="home-text new-wait">36</p>
                    <p id="total-time" class="home-text new-wait">46</p>
                    <div id="confirm-decline"><a class="nolink" href = "home.html"> DECLINE </a></div>
                    <div id="confirm-submit"><a class="nolink" href = "home.html"> CONFIRM </a></div>
                </div>
            </div>
        </div>
        
        <script>
            function geoFindNearestHospitals() {
                var finallat = "";
                var finallong = "";
                if(!navigator.geolocation) {
                    return "geolocation isn't supported by your browser";
                }

                function success(position) {
                    finallat = position.coords.latitude;
                    finallong = position.coords.longitude;
                    document.getElementById('near-text-new').innerHTML(finallat);
                }
                function error() {
                    output = "Unable to retrieve your location";
                };

                navigator.geolocation.getCurrentPosition(success, error);
                var xhr = new XMLHttpRequest();

                var url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json"
                var params = "?location=" + latitude + "," + longitude + "&radius=50&" + "type=hospital&keyword=hospital&key=AIzaSyC5sRJ8pdNXNBL4W5IAEXEmLoTOeNU0Qyw";
                xhr.open("GET", url, true);

                xhr.setRequestHeader("Content-type", "application/json; charset=utf-8");
                xhr.onreadystatechange = function() {
                if(xhr.readyState == 4 && xhr.status == 200) {
                    alert(xhr.responseText);
                    }	
                }
                xhr.send(params);
            }
        </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src = "js/script2.js"></script>
    </body>
</html>